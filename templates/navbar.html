{% load static %}
<style>
  .dropdown-menu {
    transform: translateY(-200%);
    transition: transform 0.3s ease-in-out;
  }
  .dropdown-menu.open {
    transform: translateY(0);
  }
</style>

<nav class="shadow md:px-20 px-8 py-1 bg-[#f4f4f4] flex justify-between items-center inline-flex w-full z-[1000] sticky top-0">
  <div class="py-1 md:py-[2px] md:ml-4">
    <a href="/">
      <img class="h-[45px] md:h-[60px]" src="{% static 'images/LogoPanjang.svg' %}" draggable="false"
        oncontextmenu="return false;" />
    </a>
  </div>

  <button id="hamburger" class="md:hidden text-white mr-2">
    <img src="{% static 'icon/icon_hamburger.svg' %}" alt="Menu" class="h-5">
  </button>

  <div class="justify-start items-center gap-10 hidden md:flex" id="navbar">
    <a href="/" class="text-[#01aae8] text-base font-bold font-['Raleway'] hover:text-[#01aae8]">Beranda </a>
    <a href="/catalogue" class="text-[#c8c8c8] text-base font-bold font-['Raleway'] hover:text-[#01aae8]">Catalogue</a>
    <a href="/feeds" class="text-[#c8c8c8] text-base font-bold font-['Raleway'] hover:text-[#01aae8]">Forum</a>
    <a href="/articles" class="text-[#c8c8c8] text-base font-bold font-['Raleway'] hover:text-[#01aae8]">Article</a>
    <a href="/wishlist" class="text-[#c8c8c8] text-base font-bold font-['Raleway'] hover:text-[#01aae8]">Wishlist</a>
    
    <!-- Cart Icon with Cart Count -->
    <a href="{% url 'view_cart' %}" class="relative text-[#01aae8] text-base font-bold font-['Raleway'] hover:text-[#01aae8]">
      <img src="{% static 'icon/cart_icon.svg' %}" alt="Cart" class="h-5 inline-block">
      <span id="cart-count" class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
        {{ cart_count }}
      </span>
    </a>
  </div>
</nav>

<!-- Mobile Dropdown -->
<div id="dropdown-menu" class="dropdown-menu fixed top-[69px] left-0 w-full bg-stone-50 shadow md:hidden">
  <div class="p-4">
    <div class="flex flex-col">
      <a href="/" class="text-[#01aae8] text-sm mb-4 font-semibold font-['Raleway']">Beranda </a>
      <a href="/catalogue" class="text-neutral-600 text-sm mb-4 font-semibold font-['Raleway']">Catalogue</a>
      <a href="/feeds" class="text-neutral-600 text-sm mb-4 font-semibold font-['Raleway']">Forum</a>
      <a href="/articles" class="text-neutral-600 text-sm mb-4 font-semibold font-['Raleway']">Article</a>
      <a href="/wishlist" class="text-neutral-600 text-sm font-semibold font-['Raleway']">Wishlist</a>
      
      <!-- Cart Icon in Mobile Dropdown -->
      <a href="/cart" class="relative text-[#01aae8] text-sm font-semibold font-['Raleway']">
        <img src="{% static 'images/cart_icon.svg' %}" alt="Cart" class="h-5 inline-block">
        <span id="cart-count-mobile" class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
          {{ cart_count }}
        </span>
      </a>
    </div>
  </div>
</div>

<script>
  const hamburger = document.getElementById('hamburger');
  const dropdownMenu = document.getElementById('dropdown-menu');

  hamburger.addEventListener('click', () => {
    dropdownMenu.classList.toggle('open');
  });
  
  document.addEventListener('click', (event) => {
    if (!hamburger.contains(event.target) && !dropdownMenu.contains(event.target)) {
      dropdownMenu.classList.remove('open');
    }
  });
</script>